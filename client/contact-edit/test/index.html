<!DOCTYPE 5>
<html>
  <head>
    <title>Contact Form</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="grid.css" />
    <link rel="stylesheet" href="../build/build.css" />
    <style>
      
      body { 
        padding: 60px; 
        font: 300 14px "Helvetica Neue", Helvetica, Arial;
        min-height: 1000px;
      }


      form fieldset {
        border: none;
      }

      form label, form input, form .error { 
        display: block;
        width: 100%;
      }

      form .error {
        font-size: 10.5px
      }

      form input:invalid {
        background-color: pink;
      }

    </style>
  </head>
  <body>
    <h1>Contact Form</h1>
    <div id="new-contact">
    </div>
    <div id="edit-contact">
    </div>

    <script src="../build/build.js"></script>
    <script>
      var Model = require('component-model')
        , Contact = Model('contact')
                      .attr('name')
                      .attr('organization')
                      .attr('email')
                      .attr('phone')
                      .attr('comments')
      
      Contact.validate( function(c) { if (!(c.name())) c.error('name', 'missing') } );
      Contact.validate( function(c) { if (c.name()[0] == 'F') c.error('name', 'cant start with F') } );
      Contact.validate( function(c) { if (c.name().length < 2) c.error('name', 'must be at least 2 chars') } );

      albert = new Contact({name: 'Albert', organization: 'Greenpeace'});
      newguy = new Contact;

      albert.on('saving', function(c){ console.log("saving %s...",albert.name()) });

      /////////////////////////////////////////////////////
      var View = require('contact-edit')
         , newView = View( newguy ) 
        , editView = View( albert );

      document.getElementById('new-contact').appendChild(newView.el);
      document.getElementById('edit-contact').appendChild(editView.el);

      
    </script>
  </body>
</html>
